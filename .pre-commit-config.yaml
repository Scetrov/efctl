repos:
  - repo: local
    hooks:
      - id: go-fmt
        name: go fmt
        entry: go fmt
        language: system
        types: [go]
        args: ["./..."]
        pass_filenames: false
      - id: go-vet
        name: go vet
        entry: go vet
        language: system
        types: [go]
        args: ["./..."]
        pass_filenames: false
      - id: go-build
        name: go build
        entry: go build
        language: system
        types: [go]
        args: ["-o", "output/", "./..."]
        pass_filenames: false
      - id: go-test
        name: go test
        entry: go test
        language: system
        types: [go]
        args: ["./..."]
        pass_filenames: false
      - id: gosec
        name: gosec (security scanner)
        entry: bash -c 'gosec -severity medium -confidence medium -exclude-generated ./... 2>&1; exit_code=$?; if [ $exit_code -ne 0 ] && [ $exit_code -ne 2 ]; then exit $exit_code; fi; exit 0'
        language: system
        types: [go]
        pass_filenames: false
      - id: govulncheck
        name: govulncheck (dependency vulns)
        entry: govulncheck
        language: system
        types: [go]
        args: ["./..."]
        pass_filenames: false
      - id: gocyclo
        name: gocyclo
        entry: gocyclo
        language: golang
        additional_dependencies: [github.com/fzipp/gocyclo/cmd/gocyclo@latest]
        types: [go]
        args: ["-over", "15", "."]
        pass_filenames: false

  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.21.2
    hooks:
      - id: gitleaks
        name: gitleaks (secret detection)
